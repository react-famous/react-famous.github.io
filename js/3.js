webpackJsonp([3],{165:function(t,e,n){n(2);!function(){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=e(n(269)),a=e(n(270)),u=e(n(2)),c=e(n(75)),l=e(n(76)),p=e(n(77)),h=e(n(271)),f=e(n(272)),d=100,v="surface_",m=function(t){var e=function(){o(this,e),null!=t&&t.apply(this,arguments)};return r(e,t),i(e,{componentDidMount:{value:function(){var t=this,e=this.refs.scrollview.getFamous();Object.keys(this.refs).filter(function(t){return s(t,v)}).map(function(e){return t.refs[e].getFamous()}).forEach(function(t){return t.pipe(e)})}},render:{value:function(){var t=a(d).map(function(t){var e={properties:{backgroundColor:"rgba(255, 0, 0, 0.5)",color:"white",lineHeight:"50px",textAlign:"center"},size:[void 0,50]};return u.createElement(p,{key:t,ref:""+v+t,options:e},"I am surface: ",t+1)});return u.createElement(c,null,u.createElement(p,{options:{properties:{lineHeight:"100px",textAlign:"center"},size:[void 0,100]}},"Scrollview is created inside a container surface."),u.createElement(l,{options:{align:[.5,.5],origin:[.5,.5]}},u.createElement(h,{options:{properties:{overflow:"hidden"},size:[300,300]}},u.createElement(f,{ref:"scrollview"},t))))}}}),e}(u.Component);t.exports=m}()},269:function(t,e,n){function i(t,e,n){return t=r(t),n=null==n?0:o(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}var r=n(338),o=Math.min;t.exports=i},270:function(t,e,n){function i(t,e,n){n&&r(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,a=s(o((e-t)/(n||1)),0),u=Array(a);++i<a;)u[i]=t,t+=n;return u}var r=n(337),o=Math.ceil,s=Math.max;t.exports=i},271:function(t,e,n){n(2);!function(){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=e(n(336)),a=e(n(147)),u=e(n(2)),c=(e(n(75)),e(n(151))),l=function(t){function e(){o(this,e),null!=t&&t.apply(this,arguments)}return r(e,t),i(e,{famousCreate:{value:function(){return new s(this.props.options)}},famousCreateNode:{value:function(t){var e=this.getFamous(),n=t.add(e),i=this.getFamousChildrenRef().map(function(t){return[t,e]});return[n,i]}},famousUpdate:{value:function(t){var e=this.getFamous();e.setOptions(t.options)}},render:{value:function(){return u.createElement("div",{"data-famous":"ContainerSurface"},this.getFamousChildren())}}}),e}(c);a(l,s),t.exports=l}()},272:function(t,e,n){n(2);!function(){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=e(n(254)),a=e(n(344)),u=e(n(147)),c=e(n(2)),l=e(n(151)),p=function(t){function e(){o(this,e),null!=t&&t.apply(this,arguments)}return r(e,t),i(e,{famousCreate:{value:function(){return new a(this.props.options)}},famousCreateNode:{value:function(t){var e=this.getFamous(),n=t.add(e),i=[],r=this.getFamousChildrenRef().map(function(t){var e=new s;return i.push([t,e]),e});return e.sequenceFrom(r),[n,i]}},famousUpdate:{value:function(t){var e=this.getFamous();e.setOptions(t.options)}},render:{value:function(){return c.createElement("div",{"data-famous":"Scrollview"},this.getFamousChildren())}}}),e}(l);u(p,a),t.exports=p}()},286:function(t,e,n){function i(t,e){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function r(t,e){s[t]&&(this._syncs[t]=new s[t](e),this.pipeSync(t))}var o=n(208);i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DIRECTION_Z=2;var s={};i.register=function(t){for(var e in t)if(s[e]){if(s[e]!==t[e])throw new Error("Conflicting sync classes for key: "+e)}else s[e]=t[e]},i.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},i.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},i.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},i.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)r.call(this,t[e]);else if(t instanceof Object)for(var n in t)r.call(this,n,t[n])},t.exports=i},288:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a({touchLimit:this.options.touchLimit}),u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",r.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function r(t){var e,n;void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]);var i=this._payload;i.delta=n,i.position=this._position,i.velocity=e,i.clientX=t.x,i.clientY=t.y,i.count=t.count,i.touch=t.identifier,this._eventOutput.emit("start",i)}function o(t){var e=t.history,n=e[e.length-1],r=e[e.length-2],o=e[e.length-this.options.velocitySampleLength]?e[e.length-this.options.velocitySampleLength]:e[e.length-2],s=o.timestamp,a=n.timestamp,u=n.x-r.x,c=n.y-r.y,p=n.x-o.x,h=n.y-o.y;this.options.rails&&(Math.abs(u)>Math.abs(c)?c=0:u=0,Math.abs(p)>Math.abs(h)?h=0:p=0);var f,d,v=Math.max(a-s,l),m=p/v,g=h/v,y=this.options.scale;this.options.direction===i.DIRECTION_X?(d=y*u,f=y*m,this._position+=d):this.options.direction===i.DIRECTION_Y?(d=y*c,f=y*g,this._position+=d):(d=[y*u,y*c],f=[y*m,y*g],this._position[0]+=d[0],this._position[1]+=d[1]);var _=this._payload;_.delta=d,_.velocity=f,_.position=this._position,_.clientX=t.x,_.clientY=t.y,_.count=t.count,_.touch=t.identifier,this._eventOutput.emit("update",_)}function s(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=n(348),u=n(208),c=n(209);i.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},i.DIRECTION_X=0,i.DIRECTION_Y=1;var l=8;i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.prototype.getOptions=function(){return this.options},t.exports=i},336:function(t,e,n){function i(t){r.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var r=n(145),o=n(149);i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.add=function(){return this.context.add.apply(this.context,arguments)},i.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),r.prototype.render.apply(this,arguments)},i.prototype.deploy=function(){return this._shouldRecalculateSize=!0,r.prototype.deploy.apply(this,arguments)},i.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=r.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},t.exports=i},344:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new C(this.options),this._scroller=new E(this.options),this.sync=new O(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==w.Direction.Y}),this._physicsEngine=new m,this._particle=new g,this._physicsEngine.addBody(this._particle),this.spring=new _({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new y({forceFunction:y.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new y({forceFunction:y.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=P.NONE,this._onEdge=M.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new b,this._eventOutput=new b,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),b.setInputHandler(this,this._eventInput),b.setOutputHandler(this,this._eventOutput),a.call(this),t&&this.setOptions(t)}function r(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.velocity,n=-t.delta;if(this._onEdge!==M.NONE&&t.slip&&(0>e&&this._onEdge===M.TOP||e>0&&this._onEdge===M.BOTTOM?this._earlyEnd||(s.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&r.call(this,t)),!this._earlyEnd){if(this._touchVelocity=e,t.slip){var i=this.options.speedLimit;-i>e?e=-i:e>i&&(e=i),this.setVelocity(e);var o=16*i;n>o?n=o:-o>n&&(n=-o)}this.setPosition(this.getPosition()+n),this._displacement+=n,this._springState===P.NONE&&d.call(this)}}function s(t){if(this._touchCount=t.count||0,!this._touchCount){c.call(this),this._onEdge!==M.NONE&&f.call(this,this._edgeSpringPosition,P.EDGE),u.call(this);var e=-t.velocity,n=this.options.speedLimit;t.slip&&(n*=this.options.edgeGrip),-n>e?e=-n:e>n&&(e=n),this.setVelocity(e),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",r),this._eventInput.on("update",o),this._eventInput.on("end",s),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,p.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===P.NONE&&d.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==P.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function u(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function c(){this._springState=P.NONE,this._physicsEngine.detachAll()}function l(t){var e=this.options.direction,n=t.getSize();return n?n[e]:this._scroller.getSize()[e]}function p(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===P.EDGE||f.call(this,this._edgeSpringPosition,P.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(c.call(this),u.call(this))}function h(){if(!this._touchCount&&this._springState!==P.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),n=Math.abs(t)>this.options.pageSwitchSpeed,i=l.call(this,this._node),r=e>.5*i,o=t>0,s=0>t;this._needsPaginationCheck=!1,r&&!n||n&&o?this.goToNextPage():n&&s?this.goToPreviousPage():f.call(this,0,P.PAGE)}}}function f(t,e){var n;e===P.EDGE?(this._edgeSpringPosition=t,n={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===P.PAGE&&(this._pageSpringPosition=t,n={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(n),e&&!this._springState&&(c.call(this),this._springState=e,u.call(this)),this._springState=e}function d(){var t=0,e=this.getPosition();e+=(0>e?-.5:.5)>>0;for(var n=l.call(this,this._node),i=this._node.getNext();t+e>=n&&i;)t-=n,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),n=l.call(this,this._node);for(var r,o=this._node.getPrevious();0>=t+e&&o;)r=l.call(this,o),this._scroller.sequenceFrom(o),this._node=o,t+=r,o=this._node.getPrevious();t&&v.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*n&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*n&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function v(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===P.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===P.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var m=n(353),g=n(354),y=n(386),_=n(355),b=n(208),C=n(209),x=n(384),E=n(387),w=n(297),O=n(286),S=n(388),T=n(288);O.register({scroll:S,touch:T});var P={NONE:0,EDGE:1,PAGE:2},M={TOP:-1,NONE:0,BOTTOM:1};i.DEFAULT_OPTIONS={direction:w.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},i.prototype.getCurrentIndex=function(){return this._node.index},i.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===M.TOP)return null;if(this.getPosition()>1&&this._springState===P.NONE)return f.call(this,0,P.PAGE),this._node;var t=this._node.getPrevious();if(t){var e=l.call(this,t);this._scroller.sequenceFrom(t),this._node=t,v.call(this,e),f.call(this,0,P.PAGE)}return t},i.prototype.goToNextPage=function(){if(!this._node||this._onEdge===M.BOTTOM)return null;var t=this._node.getNext();if(t){var e=l.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,v.call(this,-e),f.call(this,0,P.PAGE)}return t},i.prototype.goToPage=function(t){var e,n=this.getCurrentIndex();if(n>t)for(e=0;n-t>e;e++)this.goToPreviousPage();if(t>n)for(e=0;t-n>e;e++)this.goToNextPage()},i.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},i.prototype.getPosition=function(){return this._particle.getPosition1D()},i.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},i.prototype.getOffset=i.prototype.getPosition,i.prototype.setPosition=function(t){this._particle.setPosition1D(t)},i.prototype.setOffset=i.prototype.setPosition,i.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},i.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},i.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=w.Direction.X:"y"===t.direction&&(t.direction=w.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===w.Direction.X?O.DIRECTION_X:O.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},i.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new x({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},i.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},i.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&h.call(this),this._scroller.render()},t.exports=i},348:function(t,e,n){function i(t,e,n){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:l(),count:e.touches.length,history:n}}function r(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=i(n,t,null);this.eventOutput.emit("trackstart",r),this.selective||this.touchHistory[n.identifier]||this.track(r)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var o=i(n,t,r);this.touchHistory[n.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function s(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var o=i(n,t,r);this.eventOutput.emit("trackend",o),delete this.touchHistory[n.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",r.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",s.bind(this)),this.eventInput.on("touchcancel",s.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var c=n(208),l=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},t.exports=u},353:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=x(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function r(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,e,n){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:e,source:n},r.call(this,t).push(this._currAgentId),this._currAgentId++}function s(t){return this._agentData[t]}function a(t){var e=s.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t,e){var n=this._agentData[this._constraints[t]];return n.agent.applyConstraint(n.targets,n.source,e)}function l(t){for(var e=0;e<this.options.constraintSteps;){for(var n=this._constraints.length-1;n>-1;n--)c.call(this,n,t);e++}}function p(t,e){t.integrateVelocity(e),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function h(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit(E.update,t)}function v(t){u.call(this,t),this.forEach(p,t),this.forEachBody(h,t),l.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function m(){var t=0,e=0;return this.forEach(function(n){e=n.getEnergy(),t+=e}),t}function g(){var t=0;for(var e in this._agentData)t+=this.getAgentEnergy(e);return t}var y=n(208),_=17,b=1e3/120,C=17,x=Date.now,E={start:"start",update:"update",end:"end"};i.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},i.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},i.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},i.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,n=e.indexOf(t);if(n>-1){for(var i in this._agentData)this._agentData.hasOwnProperty(i)&&this.detachFrom(this._agentData[i].id,t);e.splice(n,1)}0===this.getBodies().length&&(this._hasBodies=!1)},i.prototype.attach=function(t,e,n){if(this.wake(),t instanceof Array){for(var i=[],r=0;r<t.length;r++)i[r]=o.call(this,t[r],e,n);return i}return o.call(this,t,e,n)},i.prototype.attachTo=function(t,e){s.call(this,t).targets.push(e)},i.prototype.detach=function(t){var e=this.getAgent(t),n=r.call(this,e),i=n.indexOf(t);n.splice(i,1),delete this._agentData[t]},i.prototype.detachFrom=function(t,e){var n=s.call(this,t);if(n.source===e)this.detach(t);else{var i=n.targets,r=i.indexOf(e);r>-1&&i.splice(r,1)}},i.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},i.prototype.getAgent=function(t){return s.call(this,t).agent},i.prototype.getParticles=function(){return this._particles},i.prototype.getBodies=function(){return this._bodies},i.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},i.prototype.forEachParticle=function(t,e){for(var n=this.getParticles(),i=0,r=n.length;r>i;i++)t.call(this,n[i],e)},i.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var n=this.getBodies(),i=0,r=n.length;r>i;i++)t.call(this,n[i],e)},i.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},i.prototype.getAgentEnergy=function(t){var e=s.call(this,t);return e.agent.getEnergy(e.targets,e.source)},i.prototype.getEnergy=function(){return m.call(this)+g.call(this)},i.prototype.step=function(){if(!this.isSleeping()){var t=x(),e=t-this._prevTime;this._prevTime=t,b>e||(e>C&&(e=C),v.call(this,_),this.emit(E.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},i.prototype.isSleeping=function(){return this._isSleeping},i.prototype.isActive=function(){return!this._isSleeping},i.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(E.end,this),this._isSleeping=!0)},i.prototype.wake=function(){this._isSleeping&&(this._prevTime=x(),this.emit(E.start,this),this._isSleeping=!1)},i.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},i.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new y),this._eventHandler.on(t,e)},t.exports=i},354:function(t,e,n){function i(t){t=t||{};var e=i.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:e.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.transform=s.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function r(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=n(356),s=n(38),a=n(208),u=n(390);i.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var c={start:"start",update:"update",end:"end"},l=Date.now;i.prototype.isBody=!1,i.prototype.isActive=function(){return!this._isSleeping},i.prototype.sleep=function(){this._isSleeping||(this.emit(c.end,this),this._isSleeping=!0)},i.prototype.wake=function(){this._isSleeping&&(this.emit(c.start,this),this._isSleeping=!1,this._prevTime=l(),this._engine&&this._engine.wake())},i.prototype.setPosition=function(t){this.position.set(t)},i.prototype.setPosition1D=function(t){this.position.x=t},i.prototype.getPosition=function(){return this._engine.step(),this.position.get()},i.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},i.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},i.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},i.prototype.getVelocity=function(){return this.velocity.get()},i.prototype.setForce=function(t){this.force.set(t),this.wake()},i.prototype.getVelocity1D=function(){return this.velocity.x},i.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},i.prototype.getMass=function(){return this.mass},i.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},i.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},i.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},i.prototype.integrateVelocity=function(t){u.integrateVelocity(this,t)},i.prototype.integratePosition=function(t){u.integratePosition(this,t)},i.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},i.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},i.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.transform;return e[12]=t.x,e[13]=t.y,e[14]=t.z,e},i.prototype.modify=function(t){var e=this._spec.target;return e.transform=this.getTransform(),e.target=t,this._spec},i.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},i.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},i.prototype.removeListener=function(){return r.call(this),this.removeListener.apply(this,arguments)},i.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},i.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},t.exports=i},355:function(t,e,n){function i(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new u(0,0,0),s.call(this)}function r(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function o(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function s(){r.call(this),o.call(this)}var a=n(392),u=n(356);i.prototype=Object.create(a.prototype),i.prototype.constructor=i;var c=Math.PI,l=150;i.FORCE_FUNCTIONS={FENE:function(t,e){var n=.99*e,i=Math.max(Math.min(t,n),-n);return i/(1-i*i/(e*e))},HOOK:function(t){return t}},i.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:i.FORCE_FUNCTIONS.HOOK},i.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof u&&(this.options.anchor=t.anchor.position),t.anchor instanceof u&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new u(t.anchor))),void 0!==t.period&&(t.period<l&&(t.period=l,console.warn("The period of a SpringTransition is capped at "+l+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),a.prototype.setOptions.call(this,t)},i.prototype.applyForce=function(t,e){var n,i,r,o,s,a,u=this.force,c=this.disp,l=this.options,p=l.stiffness,h=l.damping,f=l.length,d=l.maxLength,v=l.anchor||e.position,m=l.forceFunction;for(n=0;n<t.length;n++){if(i=t[n],r=i.position,o=i.velocity,v.sub(r).put(c),s=c.norm()-f,0===s)return;a=i.mass,p*=a,h*=a,c.normalize(p*m(s,d)).put(u),h&&(e?u.add(o.sub(e.velocity).mult(-h)).put(u):u.add(o.mult(-h)).put(u)),i.applyForce(u),e&&e.applyForce(u.mult(-1))}},i.prototype.getEnergy=function(t,e){for(var n=this.options,i=n.length,r=e?e.position:n.anchor,o=n.stiffness,s=0,a=0;a<t.length;a++){var u=t[a],c=r.sub(u.position).norm()-i;s+=.5*o*c*c}return s},t.exports=i},356:function(t){function e(t,e,n){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=n||0),this}function n(t,e,n){return this.x=t,this.y=e,this.z=n,this}function i(t){return n.call(this,t[0],t[1],t[2]||0)}function r(t){return n.call(this,t.x,t.y,t.z)}function o(t){return n.call(this,t,0,0)}var s=new e(0,0,0);e.prototype.add=function(t){return n.call(s,this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.sub=function(t){return n.call(s,this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.mult=function(t){return n.call(s,t*this.x,t*this.y,t*this.z)},e.prototype.div=function(t){return this.mult(1/t)},e.prototype.cross=function(t){var e=this.x,i=this.y,r=this.z,o=t.x,a=t.y,u=t.z;return n.call(s,r*a-i*u,e*u-r*o,i*o-e*a)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.rotateX=function(t){var e=this.x,i=this.y,r=this.z,o=Math.cos(t),a=Math.sin(t);return n.call(s,e,i*o-r*a,i*a+r*o)},e.prototype.rotateY=function(t){var e=this.x,i=this.y,r=this.z,o=Math.cos(t),a=Math.sin(t);return n.call(s,r*a+e*o,i,r*o-e*a)},e.prototype.rotateZ=function(t){var e=this.x,i=this.y,r=this.z,o=Math.cos(t),a=Math.sin(t);return n.call(s,e*o-i*a,e*a+i*o,r)},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.normSquared=function(){return this.dot(this)},e.prototype.norm=function(){return Math.sqrt(this.normSquared())},e.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(s,this.mult(t/e)):n.call(s,t,0,0)},e.prototype.clone=function(){return new e(this)},e.prototype.isZero=function(){return!(this.x||this.y||this.z)},e.prototype.set=function(t){return t instanceof Array?i.call(this,t):"number"==typeof t?o.call(this,t):r.call(this,t)},e.prototype.setXYZ=function(){return n.apply(this,arguments)},e.prototype.set1D=function(t){return o.call(this,t)},e.prototype.put=function(t){this===s?r.call(t,s):r.call(t,this)},e.prototype.clear=function(){return n.call(this,0,0,0)},e.prototype.cap=function a(a){if(a===1/0)return r.call(s,this);var t=this.norm();return t>a?r.call(s,this.mult(a/t)):r.call(s,this)},e.prototype.project=function(t){return t.mult(this.dot(t))},e.prototype.reflectAcross=function(t){return t.normalize().put(t),r(s,this.sub(this.project(t).mult(2)))},e.prototype.get=function(){return[this.x,this.y,this.z]},e.prototype.get1D=function(){return this.x},t.exports=e},384:function(t){function e(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),
this._previousNode=null,this._nextNode=null}e.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},e.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},e.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},e.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},e.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var e=[0,0],n=0;t>n;n++){var i=this.array[n].getSize();if(!i)return void 0;void 0!==e[0]&&(void 0===i[0]?e[0]=void 0:e[0]+=i[0]),void 0!==e[1]&&(void 0===i[1]?e[1]=void 0:e[1]+=i[1]),this.cumulativeSizes[n+1]=e.slice()}return this.sizeDirty=!1,e},e.Backing.prototype.reindex=function(t,e,n){if(this.array[0]){for(var i=0,r=this.firstIndex,o=n-e,s=this.firstNode;t-1>r;)s=s.getNext(),r++;var a=s;for(i=0;e>i;i++)s=s.getNext(),s&&(s._previousNode=a);var u=s?s.getNext():null;for(a._nextNode=null,s=a,i=0;n>i;i++)s=s.getNext();if(r+=n,s!==u&&(s._nextNode=u,u&&(u._previousNode=s)),u)for(s=u,r++;s&&r<this.array.length+this.firstIndex;)s._nextNode?s.index+=o:s.index=r,s=s.getNext(),r++;this.trackSize&&(this.sizeDirty=!0)}},e.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},e.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},e.prototype.indexOf=function(t){return this._.array.indexOf(t)},e.prototype.getIndex=function(){return this.index},e.prototype.toString=function(){return""+this.index},e.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.splice=function(t,e){var n=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(n)),this._.reindex(t,e,n.length)},e.prototype.swap=function(t){var e=t.get(),n=this.get();this._.setValue(this.index,e),this._.setValue(t.index,n);var i=this._previousNode,r=this._nextNode,o=this.index,s=t._previousNode,a=t._nextNode,u=t.index;this.index=u,this._previousNode=s===this?t:s,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=i===t?this:i,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=r===t?this:r,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.get=function(){return this._.getValue(this.index)},e.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},e.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},t.exports=e},386:function(t,e,n){function i(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),r.call(this)}var r=n(392);i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},i.DEFAULT_OPTIONS={strength:.01,forceFunction:i.FORCE_FUNCTIONS.LINEAR},i.prototype.applyForce=function(t){var e,n,i=this.options.strength,r=this.options.forceFunction,o=this.force;for(e=0;e<t.length;e++)n=t[e],r(n.velocity).mult(-i).put(o),n.applyForce(o)},i.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},t.exports=i},387:function(t,e,n){function i(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new l(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new c,this.group.add({render:a.bind(this)}),this._entityId=u.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput)}function r(t){t||(t=this._contextSize);var e=this.options.direction;return void 0===t[e]?this._contextSize[e]:t[e]}function o(t,e,n){var i=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(e);return n.push({transform:o,target:t.render()}),r.call(this,i)}function s(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?r.call(this,this.getCumulativeSize()):r.call(this,this._contextSize)}function a(){for(var t=null,e=this._position,n=[],i=-this._positionOffset,a=s.call(this),u=this._node;u&&i-e<a+this.options.margin;)i+=o.call(this,u,i,n),u=u.getNext?u.getNext():null;var c=this._node,l=r.call(this,c.getSize());if(a>i){for(;c&&a>l;)c=c.getPrevious(),c&&(l+=r.call(this,c.getSize()));for(c=this._node;c&&a>l;)c=c.getNext(),c&&(l+=r.call(this,c.getSize()))}for(!u&&a-v>i-e?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:i-a})):!this._node.getPrevious()&&-v>e?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),u=this._node&&this._node.getPrevious?this._node.getPrevious():null,i=-this._positionOffset,u&&(t=u.getSize?u.getSize():this._contextSize,i-=r.call(this,t));u&&i-e>-(a+this.options.margin);)o.call(this,u,i,n),u=u.getPrevious?u.getPrevious():null,u&&(t=u.getSize?u.getSize():this._contextSize,i-=r.call(this,t));return n}var u=n(321),c=n(402),l=n(209),p=n(38),h=n(297),f=n(384),d=n(208);i.DEFAULT_OPTIONS={direction:h.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var v=0;i.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},i.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},i.prototype.onEdge=function(){return this._onEdge},i.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===h.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return p.inverse(t(-e))}},i.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},i.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},i.prototype.getSize=function(t){return t?this._contextSize:this._size},i.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},i.prototype.commit=function(t){var e=t.transform,n=t.opacity,i=t.origin,r=t.size;this.options.clipSize||r[0]===this._contextSize[0]&&r[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=r[0],this._contextSize[1]=r[1],this.options.direction===h.Direction.X?(this._size[0]=s.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=s.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:p.multiply(e,o),size:r,opacity:n,origin:i,target:this.group.render()}},t.exports=i},388:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function r(){if(this._inProgress&&l()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,m=this._payload,m.slip=!0,m.position=this._position,m.clientX=t.clientX,m.clientY=t.clientY,m.offsetX=t.offsetX,m.offsetY=t.offsetY,this._eventOutput.emit("start",m),this._loopBound||(a.on("prerender",r.bind(this)),this._loopBound=!0));var e=l(),n=this._prevTime||e,o=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,s=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(o*=this.options.lineHeight,s*=this.options.lineHeight),this.options.rails&&(Math.abs(o)>Math.abs(s)?s=0:o=0);var u,p,h=Math.max(e-n,c),f=o/h,d=s/h,v=this.options.scale;this.options.direction===i.DIRECTION_X?(p=v*o,u=v*f,this._position+=p):this.options.direction===i.DIRECTION_Y?(p=v*s,u=v*d,this._position+=p):(p=[v*o,v*s],u=[v*f,v*d],this._position[0]+=p[0],this._position[1]+=p[1]);var m=this._payload;m.delta=p,m.velocity=u,m.position=this._position,m.slip=!0,this._eventOutput.emit("update",m),this._prevTime=e,this._prevVel=u}var s=n(208),a=n(82),u=n(209);i.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var c=8,l=Date.now;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},t.exports=i},390:function(t){var e={};e.integrateVelocity=function(t,e){var n=t.velocity,i=t.inverseMass,r=t.force;r.isZero()||(n.add(r.mult(e*i)).put(n),r.clear())},e.integratePosition=function(t,e){var n=t.position,i=t.velocity;n.add(i.mult(e)).put(n)},e.integrateAngularMomentum=function(t,e){var n=t.angularMomentum,i=t.torque;i.isZero()||(n.add(i.mult(e)).put(n),i.clear())},e.integrateOrientation=function(t,e){var n=t.orientation,i=t.angularVelocity;i.isZero()||n.add(n.multiply(i).scalarMultiply(.5*e)).put(n)},t.exports=e},392:function(t,e,n){function i(t){this.force=new r(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var r=n(356),o=n(208);i.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},i.prototype.applyForce=function(t){for(var e=t.length;e--;)t[e].applyForce(this.force)},i.prototype.getEnergy=function(){return 0},t.exports=i},402:function(t,e,n){function i(t){s.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new r(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var r=n(149),o=n(38),s=n(145);i.SIZE_ZERO=[0,0],i.prototype=Object.create(s.prototype),i.prototype.elementType="div",i.prototype.elementClass="famous-group",i.prototype.add=function(){return this.context.add.apply(this.context,arguments)},i.prototype.render=function(){return s.prototype.render.call(this)},i.prototype.deploy=function(t){this.context.migrate(t)},i.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},i.prototype.commit=function(t){var e=t.transform,n=t.origin,r=t.opacity,a=t.size,u=s.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(e,[-n[0]*a[0],-n[1]*a[1],0]),opacity:r,origin:n,size:i.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-n[0]*a[0],-n[1]*a[1],0),origin:n,size:a}),u},t.exports=i}});